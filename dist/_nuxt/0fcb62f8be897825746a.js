(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{353:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(356),o=r.n(n);o.a.apps.length||o.a.initializeApp({apiKey:"AIzaSyCeGgJP6bHWm7SMKkq0vcB0dZILvFJCg4M",authDomain:"mytenda-f8a93.firebaseapp.com",databaseURL:"https://mytenda-f8a93.firebaseio.com",projectId:"mytenda-f8a93",storageBucket:"mytenda-f8a93.appspot.com",messagingSenderId:"852556635264"});var c=o.a.firestore();o.a},387:function(e,t,r){"use strict";r.r(t);var n=r(22),o=r(353),c=null,l={asyncData:function(){return o.a.collection("categorias").get().then(function(e){var t=[];return e.forEach(function(e){t.push(Object(n.a)({id:e.id},e.data()))}),{perPage:10,currentPage:1,categorias:t}})},computed:{rows:function(){return this.categorias.length}},data:function(){return{msg:null,nombreState:null,referenciaState:null,descripcionState:null,fields:["nombre","referencia","descripcion","acciones"]}},methods:{eliminar:function(e){var t,r=this;this.categorias.map(function(r,n){r.id==e&&(t=n)}),o.a.collection("categorias").doc(e).delete().then(function(){r.categorias.splice(t,1)}),this.msg="La categoria ha eliminada!",this.$root.$emit("bv::show::modal","hecho")},checkFormValidity:function(){var e=this.$refs.form.checkValidity();return this.nombreState=e?"valid":"invalid",this.referenciaState=e?"valid":"invalid",this.descripcionState=e?"valid":"invalid",e},resetModal:function(){this.nombreState=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;if(this.checkFormValidity()){o.a.collection("categorias").doc(c).update({nombre:nombre.value,referencia:referencia.value,descripcion:descripcion.value}).catch(function(e){alert("Error de conexion "+e)}),this.msg="La categoria ha sido actualizada!",this.$root.$emit("bv::show::modal","hecho"),this.$nextTick(function(){e.$refs.modal.hide()})}},asignar:function(e){c=e.item.id,nombre.value=e.item.nombre,referencia.value=e.item.referencia,descripcion.value=e.item.descripcion}}},d=r(25),component=Object(d.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-4"},[e._m(0),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("p",{staticClass:"mt-3"},[e._v("Pagina numero: "+e._s(e.currentPage))])]),e._v(" "),r("div",{staticClass:"col-6 text-right"},[r("b-button",{attrs:{variant:"primary",href:"/categorias/crear"}},[e._v("Nuevo")])],1)]),e._v(" "),r("div",{staticClass:"overflow-auto"},[r("div",[r("b-table",{attrs:{responsivestriped:"",hover:"",fields:e.fields,items:e.categorias,id:"list_products","per-page":e.perPage,"current-page":e.currentPage,small:""},scopedSlots:e._u([{key:"acciones",fn:function(t){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"mr-2",attrs:{variant:"info",size:"sm"},on:{click:function(r){return e.asignar(t)}}},[e._v("Editar")]),e._v(" "),r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger",type:"button"},on:{click:function(r){return e.eliminar(t.item.id)}}},[e._v("Eliminar")])]}}])}),e._v(" "),r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Editar Categoria"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-group",{attrs:{state:e.nombreState,label:"Nombre","label-for":"name-input","invalid-feedback":"Nombre es requerido"}},[r("b-form-input",{attrs:{state:e.nombreState,id:"nombre",required:""}})],1),e._v(" "),r("b-form-group",{attrs:{state:e.referenciaState,label:"Referencia","label-for":"referencia-input","invalid-feedback":"Referencia es requerida"}},[r("b-form-input",{attrs:{state:e.referenciaState,id:"referencia",required:""}})],1),e._v(" "),r("b-form-group",{attrs:{state:e.descripcionState,label:"Descripcion","label-for":"descripcion-input","invalid-feedback":"Referenia es requerida"}},[r("b-form-input",{attrs:{state:e.descripcionState,id:"descripcion",required:""}})],1)],1)]),e._v(" "),r("b-modal",{attrs:{id:"hecho",size:"sm",buttonSize:"sm",okVariant:"success",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}},[e._v(e._s(String(e.msg)))])],1),e._v(" "),r("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"list_products"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container text-center"},[t("h1",[this._v("Categorias de productos")])])}],!1,null,null,null);t.default=component.exports}}]);