exports.ids=[2],exports.modules={24:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var o=r(23),n=r.n(o);n.a.apps.length||n.a.initializeApp({apiKey:"AIzaSyCeGgJP6bHWm7SMKkq0vcB0dZILvFJCg4M",authDomain:"mytenda-f8a93.firebaseapp.com",databaseURL:"https://mytenda-f8a93.firebaseio.com",projectId:"mytenda-f8a93",storageBucket:"mytenda-f8a93.appspot.com",messagingSenderId:"852556635264"});const c=n.a.firestore();n.a},29:function(e,t,r){"use strict";r.r(t);var o=r(24),n=null,c={asyncData:()=>o.a.collection("categorias").get().then(e=>{let t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),{perPage:10,currentPage:1,categorias:t}}),computed:{rows(){return this.categorias.length}},data:()=>({msg:null,nombreState:null,referenciaState:null,descripcionState:null,fields:["nombre","referencia","descripcion","acciones"]}),methods:{eliminar(e){let t;this.categorias.map((r,o)=>{r.id==e&&(t=o)}),o.a.collection("categorias").doc(e).delete().then(()=>{this.categorias.splice(t,1)}),this.msg="La categoria ha eliminada!",this.$root.$emit("bv::show::modal","hecho")},checkFormValidity(){const e=this.$refs.form.checkValidity();return this.nombreState=e?"valid":"invalid",this.referenciaState=e?"valid":"invalid",this.descripcionState=e?"valid":"invalid",e},resetModal(){this.nombreState=null},handleOk(e){e.preventDefault(),this.handleSubmit()},handleSubmit(){if(!this.checkFormValidity())return;o.a.collection("categorias").doc(n).update({nombre:nombre.value,referencia:referencia.value,descripcion:descripcion.value}).catch(function(e){alert("Error de conexion "+e)}),this.msg="La categoria ha sido actualizada!",this.$root.$emit("bv::show::modal","hecho"),this.$nextTick(()=>{this.$refs.modal.hide()})},asignar(e){n=e.item.id,nombre.value=e.item.nombre,referencia.value=e.item.referencia,descripcion.value=e.item.descripcion}}},d=r(1),component=Object(d.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container mt-4"},[e._ssrNode('<div class="container text-center"><h1>Categorias de productos</h1></div> '),e._ssrNode('<div class="row">',"</div>",[e._ssrNode('<div class="col-6"><p class="mt-3">'+e._ssrEscape("Pagina numero: "+e._s(e.currentPage))+"</p></div> "),e._ssrNode('<div class="col-6 text-right">',"</div>",[r("b-button",{attrs:{variant:"primary",href:"/categorias/crear"}},[e._v("Nuevo")])],1)],2),e._ssrNode(" "),e._ssrNode('<div class="overflow-auto">',"</div>",[e._ssrNode("<div>","</div>",[r("b-table",{attrs:{responsivestriped:"",hover:"",fields:e.fields,items:e.categorias,id:"list_products","per-page":e.perPage,"current-page":e.currentPage,small:""},scopedSlots:e._u([{key:"acciones",fn:function(t){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"mr-2",attrs:{variant:"info",size:"sm"},on:{click:function(r){return e.asignar(t)}}},[e._v("Editar")]),e._v(" "),r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger",type:"button"},on:{click:function(r){return e.eliminar(t.item.id)}}},[e._v("Eliminar")])]}}])}),e._ssrNode(" "),r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Editar Categoria"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-group",{attrs:{state:e.nombreState,label:"Nombre","label-for":"name-input","invalid-feedback":"Nombre es requerido"}},[r("b-form-input",{attrs:{state:e.nombreState,id:"nombre",required:""}})],1),e._v(" "),r("b-form-group",{attrs:{state:e.referenciaState,label:"Referencia","label-for":"referencia-input","invalid-feedback":"Referencia es requerida"}},[r("b-form-input",{attrs:{state:e.referenciaState,id:"referencia",required:""}})],1),e._v(" "),r("b-form-group",{attrs:{state:e.descripcionState,label:"Descripcion","label-for":"descripcion-input","invalid-feedback":"Referenia es requerida"}},[r("b-form-input",{attrs:{state:e.descripcionState,id:"descripcion",required:""}})],1)],1)]),e._ssrNode(" "),r("b-modal",{attrs:{id:"hecho",size:"sm",buttonSize:"sm",okVariant:"success",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}},[e._v(e._s(String(e.msg)))])],2),e._ssrNode(" "),r("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"list_products"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],2)],2)},[],!1,null,null,"2e5eea4c");t.default=component.exports}};
//# sourceMappingURL=ec8bc230b8836854b88f.js.map