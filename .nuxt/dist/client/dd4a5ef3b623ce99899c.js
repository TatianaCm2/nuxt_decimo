(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{354:function(t,e,r){"use strict";r.d(e,"a",function(){return c});var o=r(357),n=r.n(o);n.a.apps.length||n.a.initializeApp({apiKey:"AIzaSyCeGgJP6bHWm7SMKkq0vcB0dZILvFJCg4M",authDomain:"mytenda-f8a93.firebaseapp.com",databaseURL:"https://mytenda-f8a93.firebaseio.com",projectId:"mytenda-f8a93",storageBucket:"mytenda-f8a93.appspot.com",messagingSenderId:"852556635264"});var c=n.a.firestore();n.a},391:function(t,e,r){"use strict";r.r(e);var o=r(22),n=r(2),c=r(354),d=r(179),l=r.n(d),m=r(180),f=r.n(m),v=r(178),h=r.n(v);n.a.component("b-modal",l.a),n.a.directive("b-modal",f.a),n.a.use(h.a);var _=null,S={asyncData:function(){return c.a.collection("productos").get().then(function(t){var e=[];return t.forEach(function(t){e.push(Object(o.a)({id:t.id},t.data()))}),{perPage:10,currentPage:1,productos:e}})},computed:{rows:function(){return this.productos.length}},data:function(){return{dismissSecs:10,dismissCountDown:0,showDismissibleAlert:!1,nombreState:null,precioState:null,cantidadState:null,fields:["Imagen","nombre","precio","cantidad","acciones"]}},methods:{eliminar:function(t){var e,r=this;this.productos.map(function(r,o){r.id==t&&(e=o)}),c.a.collection("productos").doc(t).delete().then(function(){r.productos.splice(e,1)}),alert("Eliminado")},editar:function(){console.log("logrado")},checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nombreState=t?"valid":"invalid",this.precioState=t?"valid":"invalid",this.cantidadState=t?"valid":"invalid",t},resetModal:function(){this.nombreState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;if(this.checkFormValidity()){c.a.collection("productos").doc(_).update({nombre:nombre.value,precio:precio.value,cantidad:cantidad.value}).catch(function(t){alert("Error de conexion "+t)}),this.$root.$emit("bv::show::modal","hecho"),this.$nextTick(function(){t.$refs.modal.hide()})}},asignar:function(t){_=t.item.id,nombre.value=t.item.nombre,precio.value=t.item.precio,cantidad.value=t.item.cantidad}}},k=r(25),component=Object(k.a)(S,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-4"},[t._m(0),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("p",{staticClass:"mt-3"},[t._v("Pagina numero: "+t._s(t.currentPage))])]),t._v(" "),r("div",{staticClass:"col-6 text-right"},[r("b-button",{attrs:{variant:"primary",href:"/productos/crear"}},[t._v("Nuevo")])],1)]),t._v(" "),r("div",{staticClass:"overflow-auto"},[r("div",[r("b-table",{attrs:{responsivestriped:"",hover:"",fields:t.fields,items:t.productos,id:"list_products","per-page":t.perPage,"current-page":t.currentPage,small:""},scopedSlots:t._u([{key:"acciones",fn:function(e){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"mr-2",attrs:{variant:"info",size:"sm"},on:{click:function(r){return t.asignar(e)}}},[t._v("Editar")]),t._v(" "),r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger",type:"button"},on:{click:function(r){return t.eliminar(e.item.id)}}},[t._v("Eliminar")])]}}])}),t._v(" "),r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Editar Producto"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[r("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("b-form-group",{attrs:{state:t.nombreState,label:"Nombre","label-for":"name-input","invalid-feedback":"Nombre es requerido"}},[r("b-form-input",{attrs:{state:t.nombreState,id:"nombre",required:""}})],1),t._v(" "),r("b-form-group",{attrs:{state:t.precioState,label:"Precio","label-for":"precio-input","invalid-feedback":"Precio es requerido"}},[r("b-form-input",{attrs:{state:t.precioState,id:"precio",required:""}})],1),t._v(" "),r("b-form-group",{attrs:{state:t.cantidadState,label:"Cantidad","label-for":"cantidad-input","invalid-feedback":"Cantidad es requerida"}},[r("b-form-input",{attrs:{state:t.cantidadState,id:"cantidad",required:""}})],1)],1)]),t._v(" "),r("b-modal",{attrs:{id:"hecho",size:"sm",buttonSize:"sm",okVariant:"success",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0"}},[t._v("El producto ha sido actualizado!")])],1),t._v(" "),r("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"list_products"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container text-center"},[e("h1",[this._v("Productos existentes")])])}],!1,null,null,null);e.default=component.exports}}]);